{% extends "base.html" %}

{% block content %}
<div class="form-container">
  <h2 class="form-title">API Консоль</h2>
  <p>Это интерактивная консоль для тестирования API моего портфолио. Используйте кнопки ниже, чтобы получить данные.</p>

  <div class="api-console">
    <div class="api-buttons">
      <button id="fetchProfileBtn" class="api-btn">Получить профиль (GET /api/profile)</button>
      <button id="fetchProjectsBtn" class="api-btn">Получить проекты (GET /api/projects)</button>
    </div>

    <div class="api-response">
      <h3>Ответ сервера:</h3>
      <pre id="response">{"status": "Нажмите кнопку выше"}</pre>
    </div>
  </div>
</div>

<script>
  const responseEl = document.getElementById('response');

  async function fetchData(endpoint) {
    responseEl.textContent = "Загрузка...";
    try {
      const response = await fetch(endpoint);
      const data = await response.json();
      responseEl.textContent = JSON.stringify(data, null, 2);
    } catch (error) {
      responseEl.textContent = `Ошибка: ${error.message}`;
    }
  }

  document.getElementById('fetchProfileBtn').addEventListener('click', () => {
    fetchData('/api/profile');
  });

  document.getElementById('fetchProjectsBtn').addEventListener('click', () => {
    fetchData('/api/projects');
  });
</script>
{% endblock %}